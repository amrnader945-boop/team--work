<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>AMR LAB — Patient Report</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
    @import url('https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600&display=swap');

    body {
        margin: 0;
        font-family: 'Poppins', sans-serif;
        background: radial-gradient(circle at top, #0b1d3a, #061426);
        min-height: 100vh;
        padding: 20px;
        color: white;
    }

    .container {
        max-width: 700px;
        margin: auto;
        background: rgba(255,255,255,0.08);
        padding: 25px;
        border-radius: 20px;
        backdrop-filter: blur(14px);
        box-shadow: 0 15px 35px rgba(0,0,0,0.4);
        animation: fadeIn .8s ease;
        border: 1px solid rgba(255,255,255,0.15);
    }

    @keyframes fadeIn {
        from {opacity:0; transform: translateY(30px);}
        to {opacity:1; transform: translateY(0);}
    }

    h1 {
        text-align: center;
        font-weight: 600;
        margin-bottom: 25px;
    }

    .section-title {
        font-size: 18px;
        font-weight: 600;
        margin: 15px 0 8px;
        border-left: 4px solid #21e6c1;
        padding-left: 8px;
    }

    .row {
        display: flex;
        justify-content: space-between;
        padding: 8px 0;
        border-bottom: 1px solid rgba(255,255,255,0.15);
    }

    .value {
        font-weight: 600;
    }

    /* Floating WhatsApp Button */
    #wa-btn {
        position: fixed;
        right: 20px;
        bottom: 20px;
        background: #25D366;
        border: none;
        padding: 15px 20px;
        border-radius: 50px;
        display: flex;
        align-items: center;
        gap: 10px;
        color: white;
        font-weight: bold;
        cursor: pointer;
        font-size: 15px;
        box-shadow: 0 8px 25px rgba(0,0,0,0.4);
        transition: .3s;
    }

    #wa-btn:hover {
        transform: scale(1.08);
    }

    #wa-btn img {
        width: 22px;
    }
</style>
</head>

<body>

<div class="container">
    <h1>AMR LAB — Patient Report</h1>

    <div class="section-title">Patient Information</div>
    <div class="row"><span>Name</span> <span class="value" id="pName">-</span></div>
    <div class="row"><span>ID</span> <span class="value" id="pID">-</span></div>
    <div class="row"><span>Doctor</span> <span class="value" id="pDoctor">-</span></div>
    <div class="row"><span>Phone</span> <span class="value" id="pPhone">-</span></div>
    <div class="row"><span>Email</span> <span class="value" id="pEmail">-</span></div>

    <div class="section-title">Test Results</div>
    <div class="row"><span>ABS</span> <span class="value" id="abs">-</span></div>
    <div class="row"><span>CONC</span> <span class="value" id="conc">-</span></div>
    <div class="row"><span>TRANS</span> <span class="value" id="trans">-</span></div>
</div>

<button id="wa-btn">
    <img src="https://cdn-icons-png.flaticon.com/512/733/733585.png">
    Send via WhatsApp
</button>

<script>
// ==========================
// LOAD PATIENT DATA
// ==========================
const data = JSON.parse(localStorage.getItem("patientData"));

// لو مفيش داتا يرجعه للصفحه القديمة
if (!data) {
    alert("No Data Found — Please Login Again");
    window.location.href = "index.html";
}

// Fill Data
document.getElementById("pName").innerText = data.name;
document.getElementById("pID").innerText = data.id;
document.getElementById("pDoctor").innerText = data.doctor || "Unknown";
document.getElementById("pPhone").innerText = data.phone;
document.getElementById("pEmail").innerText = data.email || "N/A";

document.getElementById("abs").innerText = data.ABS;
document.getElementById("conc").innerText = data.CONC;
document.getElementById("trans").innerText = data.TRANS;

// ==========================
// SEND WHATSAPP BUTTON
// ==========================
document.getElementById("wa-btn").addEventListener("click", () => {
    const link = "https://amrnader945-boop.github.io/team--work/patient.html?id=" + data.id;

    const msg =
`Hello ${data.name},
Your lab results are ready.
Click here to view: ${link}`;

    window.open(`https://wa.me/${data.phone}?text=${encodeURIComponent(msg)}`);
});
</script>

</body>
</html>
